<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetCare - To-Do List</title>
    <link rel="stylesheet" href="todo.css">
</head>
<body id="background">
    <nav class="navbar">
        <div class="nav-left">
          <img src="logo.png" alt="PetCare Logo" class="nav-logo">
          <span class="brand-name">PetCare</span>
        </div>
        <span class="nav-right">
                <p><a href="dashboard.html">Home</a></p>
                <p><a href="todo.html">To-Do</a></p>
                <p><a href="appointments.html">Appointments</a></p>
                <p><a href="health-records.html">Health-Records</a></p>
                <div class="nav-icons-container">
                    <div class="nav-dropdown">
                        <div id="pet-icon-nav" class="nav-icon pet-icon" title="Pet Profile">
                            <span id="pet-emoji-icon">üêæ</span>
                        </div>
                        <div class="dropdown-menu pet-dropdown">
                            <a href="pet-info.html" class="dropdown-item">üìã Pet Info</a>
                            <div class="dropdown-item pet-code-item" onclick="copyPetCode()">
                                <span>üîë Pet Code: <span id="dropdown-pet-code">Loading...</span></span>
                                <small>Click to copy</small>
                            </div>
                            <div class="dropdown-item pet-switcher-item-header">
                                <span>üêæ Other Pet Profiles</span>
                            </div>
                            <div id="pet-switcher-list" class="pet-switcher-list">
                                <div class="pet-switcher-loading">Loading pets...</div>
                            </div>
                        </div>
                    </div>
                    <div class="nav-dropdown">
                        <div class="nav-icon user-icon" title="User Profile">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="8" r="4" fill="#666"/>
                                <path d="M6 20c0-3.314 2.686-6 6-6s6 2.686 6 6" stroke="#666" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <div class="dropdown-menu user-dropdown">
                            <a href="profile.html" class="dropdown-item">üë§ User Info</a>
                            <div class="dropdown-item logout-item" onclick="logout()">üö™ Logout</div>
                        </div>
                    </div>
                </div>
        </span>
      </nav>
      
    
    <main>
        <div class="todo-container">
            <h2>Daily To-Do List</h2>
            <ul id="task-list"></ul>
            
            <!-- Add New Task Box -->
            <div class="add-task-box" id="add-task-box">
                <div class="add-task-input" id="add-task-input">
                    <input type="text" id="task-input" placeholder="Add new task...">
                </div>
                
                <!-- Expanded Form (Hidden by default) -->
                <div class="expanded-form" id="expanded-form" style="display: none;">
                    <textarea id="task-description" placeholder="Description (optional)"></textarea>
                    <input type="text" id="assigned-to" placeholder="Assigned to (optional)">
                    <input type="time" id="reminder-time" placeholder="Set time (optional)">
                    
                    <!-- Repetition Options -->
                    <div class="repetition-section">
                        <label class="repetition-label">Repeat:</label>
                        <select id="repeat-type" class="repeat-select">
                            <option value="none">No repeat</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="custom">Custom</option>
                        </select>
                        
                        <div id="custom-repeat" class="custom-repeat" style="display: none;">
                            <label>Every:</label>
                            <input type="number" id="repeat-interval" placeholder="1" min="1" class="repeat-interval">
                            <select id="repeat-period" class="repeat-period">
                                <option value="days">days</option>
                                <option value="weeks">weeks</option>
                                <option value="months">months</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <button id="save-task-btn" class="save-btn">Save</button>
                        <button id="cancel-task-btn" class="cancel-btn">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification Modal -->
    <div id="notification-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>‚è∞ Reminder!</h3>
            <p id="notification-text"></p>
            <button id="notification-ok">OK</button>
        </div>
    </div>

    <script src="session-utils.js"></script>
    <script src="storage-utils.js"></script>
    <script src="todo.js"></script>
    <script src="show-pet-nav.js"></script>
    <script src="pet-switcher.js"></script>
    <script>
        // Highlight active page in navigation
        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop() || 'todo.html';
            const navLinks = document.querySelectorAll('.nav-right p a');
            navLinks.forEach(link => {
                const linkPage = link.getAttribute('href');
                if (linkPage === currentPage || (currentPage === '' && linkPage === 'todo.html')) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>